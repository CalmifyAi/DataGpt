<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Analysis</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(to bottom, #f0f4f8, #d9e2ec);
    color: #333;
  }

  /* Front page */
  #frontPage {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    text-align: center;
  }
  #frontPage h1 {
    font-size: 3em;
    margin-bottom: 20px;
    color: #4a4e69;
  }
  #frontPage img {
    max-width: 300px;
    margin-bottom: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  }
  #getStartedBtn {
    padding: 15px 40px;
    font-size: 1.2em;
    background-color: #6b5b95;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.3s;
  }
  #getStartedBtn:hover {
    background-color: #52437b;
  }

  /* Main app page */
  #mainPage {
    display: none;
    padding: 20px;
  }
  input, textarea, button {
    padding: 10px;
    margin: 5px 0;
    width: 100%;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1em;
  }
  button.analyzeBtn {
    background-color: #6b5b95;
    color: white;
    border: none;
    cursor: pointer;
    transition: 0.3s;
  }
  button.analyzeBtn:hover {
    background-color: #52437b;
  }
  #results {
    margin-top: 20px;
  }
  img.analysisImg {
    max-width: 200px;
    margin: 5px;
    border-radius: 10px;
  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ml5/0.12.2/ml5.min.js"></script>
</head>
<body>

<!-- Front Page -->
<div id="frontPage">
  <h1>AI Analysis Hub</h1>
  <img src="https://images.unsplash.com/photo-1612832021340-2bffb0a6f6b8?fit=crop&w=500&q=80" alt="Humanoid Robot">
  <button id="getStartedBtn">Get Started</button>
</div>

<!-- Main App Page -->
<div id="mainPage">
  <h2>Enter your subject or idea</h2>
  <textarea id="textInput" placeholder="Describe the subject or idea here..."></textarea>
  <input type="file" id="imageInput" accept="image/*">
  <button class="analyzeBtn" onclick="analyze()">Analyze</button>

  <div id="results">
    <div id="textReport"></div>
    <div id="imageReport"></div>
    <div id="relatedImages"></div>
    <div id="imagePreview"></div>
  </div>
</div>

<script>
let classifier;

// Load MobileNet model
ml5.imageClassifier('MobileNet').then(model => {
  classifier = model;
  console.log('Model loaded');
});

// Front page button
document.getElementById('getStartedBtn').addEventListener('click', () => {
  document.getElementById('frontPage').style.display = 'none';
  document.getElementById('mainPage').style.display = 'block';
});

// Analyze function
function analyze() {
  const text = document.getElementById('textInput').value;
  const file = document.getElementById('imageInput').files[0];

  // Text analysis
  if(text) {
    const words = text.split(/\s+/);
    const freq = {};
    words.forEach(w => {
      w = w.toLowerCase().replace(/[^a-z]/g,'');
      if(w.length>3) freq[w] = (freq[w]||0)+1;
    });
    const keywords = Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,5).map(k=>k[0]);
    const sentences = text.split(/[.?!]/).filter(s=>s.trim().length>0);
    const summary = sentences.slice(0, Math.min(2, sentences.length)).join('. ') + '.';

    document.getElementById('textReport').innerHTML = `
      <h3>Text Summary:</h3><p>${summary}</p>
      <h4>Keywords:</h4><p>${keywords.join(', ')}</p>
    `;

    // Related images
    const related = keywords.map(k=>`https://source.unsplash.com/200x200/?${encodeURIComponent(k)}`);
    document.getElementById('relatedImages').innerHTML = related.map(url=>`<img class="analysisImg" src="${url}">`).join('');
  }

  // Image analysis
  if(file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = document.createElement('img');
      img.src = event.target.result;
      img.id = 'uploadedImg';
      img.className = 'analysisImg';
      document.getElementById('imagePreview').innerHTML = '';
      document.getElementById('imagePreview').appendChild(img);

      classifier.classify(img).then(results => {
        const report = results.slice(0,3).map(r=>`<li>${r.label} (${(r.confidence*100).toFixed(2)}%)</li>`).join('');
        document.getElementById('imageReport').innerHTML = `<h3>Image Analysis Report:</h3><ul>${report}</ul>`;
      }).catch(err=>console.error(err));
    }
    reader.readAsDataURL(file);
  }
}
</script>

</body>
</html>
